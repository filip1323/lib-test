<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang=""> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>lib-test</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="shortcut icon" type="image/ico" href="favicon.ico"/>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    <script src="js/vendor/angular/angular.js"></script>
</head>
<body  ng-app="libApp" ng-controller="MainCtrl as main">
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Example of awesome frontend</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <form class="navbar-form navbar-right" role="form" action="/login" method="POST" ng-show="!authenticated">
                <div class="form-group">
                    <input name="username" id="username"  type="text" placeholder="Login" class="form-control" ng-model="credentials.username">
                </div>
                <div class="form-group">
                    <input name="password" id="password" type="password" placeholder="Password" class="form-control" ng-model="credentials.password">
                </div>
                <button type="submit" class="btn btn-success">Sign in</button>
            </form>
            <form class="navbar-form navbar-right" role="form" ng-submit="logout()" ng-show="authenticated">
                <button type="submit" class="btn btn-info">Sign out</button>
            </form>
        </div><!--/.navbar-collapse -->
    </div>
</nav>

<!-- Main jumbotron for a primary marketing message or call to action -->
<div class="jumbotron">
    <div class="container">
        <h1>Hello there.</h1>
        <p>Below, you can see action, that can be performed. In case you dont have required privileges or are not able to perform certain action at the moment, button should be disabled.</p>
        <p class="split-underneath">
            <a ng-disabled="!authenticated" class="btn btn-primary btn-lg" href="/book-editor" role="button">Add/edit/remove book &raquo;</a>
            <a ng-disabled="!authenticated" class="btn btn-primary btn-lg" href="/service-book" role="button">Borrow book &raquo;</a>
            <a ng-disabled="!authenticated || main.user.booksBorrowed.length == 0" class="btn btn-primary btn-lg" href="/return-book" role="button">Return book &raquo;</a>
            <a ng-disabled="!authenticated || main.user.role != 'admin'"disabled class="btn btn-primary btn-lg" href="/check-service" role="button">Check service status &raquo;</a>
        </p>
    </div>
</div>

<div class="container" ng-controller="UserCtrl">
    <div class="row bookeditor" ng-controller="EditBookCtrl as editctrl">
        <h2>Add/edit/remove book</h2>
        <hr/>
        <div class="col-md-4">
            <form  role="form" ng-submit="editctrl.addBook()">
                <div class="form-group">
                    <input type="text" placeholder="Title" class="form-control" ng-model="book.title">
                </div>
                <div class="form-group">
                    <input type="text" placeholder="Author's name" class="form-control" ng-model="book.author">
                </div>
                <div class="form-group">
                    <input type="text" placeholder="ISBN" class="form-control"  ng-model="book.isbn">
                </div>
                <button type="submit" class="btn btn-success">Add</button>
                <!-- TODO <button type="submit" class="btn btn-success">Edit</button>-->
                <!-- TODO <button type="submit" class="btn btn-danger">Stop edit</button> -->
            </form>
        </div>
        <div class="col-md-8">
            <table class="table table-striped table-bordered table-hover">
                <tr>
                    <th>Title</th><th>Autor's name</th><th>ISBN</th>
                </tr>

                <tr ng-repeat="book in books">
                    <td>{{book.title}}</td><td>{{book.author}}</td><td>{{book.isbn}}<a class="btn btn-danger btn-sm delete-button pull-right" href="/rest/remove-book/{{book.id}}" role="button">Remove</a></td>
                </tr>


            </table>
        </div>
    </div>

    <hr/>

    <footer>
        <p>&copy; Filip ≈Åukomski 2015</p>
    </footer>
</div> <!-- /container -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.js"><\/script>')</script>

<script src="js/vendor/bootstrap.min.js"></script>

<script src="js/main.js"></script>

</body>
</html>
